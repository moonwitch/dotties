#! /bin/sh

# =========
# Autostart
# =========
# Authentication Agent
if [ -f /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 ] ; then
    /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
fi

# USB/Multimedia Devices
if hash udiskie > /dev/null 2>&1 ; then
    udiskie &
fi

# Lockscreen loading on inactivity
xautolock -detectsleep -time 15 -locker "betterlockscreen --lock blur" -killtime 30 -killer "systemctl suspend" &

# Enable Numlock
numlockx &

# Start Keybinds
sxhkd &

# Set Wallpaper
feh --bg-fill $WALLPAPER

# Start Compositor
killall picom
picom -f --config ~/.config/picom.conf &

# Start Tray Applets (network + pamac)
nm-applet &
# pamac-tray &

#setxkbmap -layout us -variant euro
setxkbmap -layout us -variant altgr-intl

# Starting polybar
killall polybar
polybar topbar -r &

# ==========
# Workspaces
# ==========
bspc monitor -d Main Code Web Media Social Design Work
bspc config focus_follows_pointer true

# =====
# Tiled
# =====
# Border width
bspc config border_width 3

# Gap between windows
bspc config window_gap 10

# Windows split ratio
bspc config split_ratio 0.5

# =======
# Monocle
# =======
# Borders
bspc config borderless_monocle false

# Gap
bspc config gapless_monocle false

# ============
# Window Rules-> Find WM_Class with
# xprop | grep WM_CLASS | awk '{print $4}'
# ============
bspc rule -r *:*
bspc rule --add Pamac-manager state=floating
bspc rule --add yad state=floating
bspc rule --add Zathura state=tiled

# Desktop 1: Main
bspc rule --add libreoffice-*   desktop='^1' follow=on focus=on

# Desktop 2: Code
bspc rule --add atom            desktop='^2' follow=on focus=on
bspc rule --add code-oss        desktop='^2' follow=on focus=on
bspc rule --add gedit           desktop='^2' follow=on focus=on

# Desktop 3: Web
bspc rule --add Chromium-*      desktop='^3' follow=on focus=on

# Desktop 4: Media Spotify has a blank WM_Class btw
bspc rule --add [Ss]potify      desktop='^4' follow=on focus=on state=fullscreen

# Desktop 5: Chat
bspc rule --add Caprine         desktop='^5' follow=on focus=on
bspc rule --add Mattermost      desktop='^5' follow=on
bspc rule --add Pidgin          desktop='^5' follow=on
bspc rule --add 'Cisco Webex Meetings - Mozilla Firefox'      desktop='^5' follow=on focus=on #Used for Webex at work

# Desktop 6: Design
bspc rule --add Darktable       desktop="^6"
bspc rule --add Gimp            desktop="^6"
bspc rule --add gimp            desktop="^6"
bspc rule --add Inkscape        desktop="^6"
bspc rule --add Rawtherapee     desktop="^6"
bspc rule --add Shotwell        desktop="^6"

# Desktop 7: Work
bspc rule --add 'Mail - CRABBE Kelly - Outlook - Mozilla Firefox'      desktop='^7' follow=on focus=on #Webmail


# vim:filetype=sh
#bash "$HOME/.config/bspwm/bspwm_colors.sh" &
